const token = 'YTrHuOcFls3jvQGxGprbdfBz'; const projectName = 'dashboard-vercel-def'; const envs = [ { key: 'VITE_SUPABASE_URL', value: 'https://agjvhvjhrmwkvszyjitl.supabase.co', type: 'plain', target: ['production', 'preview', 'development'] }, { key: 'VITE_SUPABASE_ANON_KEY', value: 'sb_publishable_cCZyt6Ty-V7OQ9hKwH8geQ_29UkfEI-', type: 'plain', target: ['production', 'preview', 'development'] } ]; async function run() { try { console.log('Searching for project from token...'); const searchRes = await fetch('https://api.vercel.com/v9/projects?search=' + projectName, { headers: { Authorization: 'Bearer ' + token } }); const searchData = await searchRes.json(); const project = searchData.projects ? searchData.projects.find(p => p.name === projectName) : null; if (!project) { console.error('Project not found! Check token permissions or name.'); console.log(JSON.stringify(searchData)); process.exit(1); } console.log('Found Project ID: ' + project.id); for (const env of envs) { console.log('Adding ' + env.key + '...'); const res = await fetch('https://api.vercel.com/v10/projects/' + project.id + '/env', { method: 'POST', headers: { Authorization: 'Bearer ' + token, 'Content-Type': 'application/json' }, body: JSON.stringify(env) }); const data = await res.json(); if (res.ok) console.log('Success!'); else console.log('Notice: ' + (data.error ? data.error.message : 'Error adding var')); } console.log('DONE! PLEASE REDEPLOY NOW.'); } catch (e) { console.error(e); } } run();
